#!/bin/sh

set -e

# Defaults
PREFIX="/usr/local"

for i in "$@"; do
	case $i in
		--prefix=*)
			PREFIX="${i#*=}"
			;;
		--help | -h)
cat <<EOF
riot-player configuration program.

Available options:

    --prefix=PATH      Specifies the path where riot-player will be
                       installed to.
                       (default: /usr/local)

    --help             Shows this help.

EOF
			exit 0
			;;
		*)
			printf "Unknown option: $i\n"
			exit 1
			;;
	esac
done

git clone https://github.com/mintsuki/generic-webplayer.git

cp riot-player.icon generic-webplayer/src/player.icon
cp riot-player.desktop generic-webplayer/src/player.desktop
cd generic-webplayer
./configure \
        --prefix="$PREFIX" \
        --webapp-url="https://riot.im/app/" \
        --player-name="riot-player" \
        --player-nice-name="Riot Player"

printf "Prefix: $PREFIX\n"
